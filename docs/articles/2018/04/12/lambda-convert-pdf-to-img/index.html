
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Lambda Function to convert PDF to Image by Node.js</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="author" content="Hidetatsu Yaginuma">

  <link href="https://cdn.jsdelivr.net/npm/github-markdown-css@3.0.1/github-markdown.min.css" rel="stylesheet"></link>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>


<body class="markdown-body">
<h1><a href="/">dtyler.io</a></h1>

<hr>

<h1>Lambda Function to convert PDF to Image by Node.js</h1>

<p>2018/04/12</p>

<p>I&rsquo;ve created AWS Lambda function to convert pdf to image.</p>

<p>Repository is <a href="https://github.com/ygnmhdtt/lmd_pdf2img">here</a>.<br>
I need this function for work, but I couldn&rsquo;t find any useful libraries or examples.</p>

<h3>How to use</h3>

<p>First, you need to install dependencies.</p>

<pre><code>$ npm install gm aws-sdk util
</code></pre>

<p>Now, I haven&rsquo;t prepared any deployment command.<br>
You need to do it manually like this.</p>

<pre><code>$ zip -r function.zip *
</code></pre>

<p>And, you need to upload zip at lambda console.<br>
Of course, you must set function trigger <code>S3 Upload</code> .</p>

<h3>Source code</h3>

<p>All in <code>index.js</code> .</p>

<pre><code>const srcBucket = event.Records[0].s3.bucket.name;
const srcKey = decodeURIComponent(event.Records[0].s3.object.key.replace(/\+/g, &quot; &quot;));

const dstBucket = srcBucket;
const dstKey = srcKey.replace('.pdf', '.png');
</code></pre>

<p>Now, destination bucket and key is same as source (extension will be <code>png</code> ).<br>
If you want to configure it, please write your own code.</p>

<p>Other configurations are written in README.</p>

<hr>

<p><a href="/">home</a></p>

</body>

</html>
