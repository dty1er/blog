<link href="/markdown.css" rel="stylesheet"></link>
<h1>dtyler.io</h1>

<h2><a href="/article/2017/06/19/python2-lambda-slack/">Python2でAWSLambdaからSlack通知をするための最低限のコード</a></h2>

<p>2017/06/19</p>

<p>検証のために、Lambdaから最低限のコードでSlack通知を行うようにした。</p>

<h3>コード</h3>

<pre><code>#-*- coding:utf-8 -*-
from urllib import urlencode
from urllib2 import Request, urlopen
import json

SLACK_POST_URL = &quot;https://hooks.slack.com/services/XXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;

def lambda_handler(event, context):
    post()

def post():
    slack_message = {
        ''channel'': ''test_channel'',
        ''text'': ''test_message'',
        ''username'': ''test_username'',
        ''icon_emoji'': '':smile:''
    }
    req = Request(SLACK_POST_URL, json.dumps(slack_message))
    response = urlopen(req)
</code></pre>

<p>これで、SLACK_POST_URL と slack_message だけいい感じに変えれば動く。</p>
