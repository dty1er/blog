
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Python2でAWSLambdaからSlack通知をするための最低限のコード</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="author" content="Hidetatsu Yaginuma">

  <link href="https://cdn.jsdelivr.net/npm/github-markdown-css@3.0.1/github-markdown.min.css" rel="stylesheet"></link>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>


<body class="markdown-body">
<h1><a href="/">dtyler.io</a></h1>

<hr>

<h1>Python2でAWSLambdaからSlack通知をするための最低限のコード</h1>

<p>2017/06/19</p>

<p>検証のために、Lambdaから最低限のコードでSlack通知を行うようにした。</p>

<h3>コード</h3>

<pre><code>#-*- coding:utf-8 -*-
from urllib import urlencode
from urllib2 import Request, urlopen
import json

SLACK_POST_URL = &quot;https://hooks.slack.com/services/XXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;

def lambda_handler(event, context):
    post()

def post():
    slack_message = {
        ''channel'': ''test_channel'',
        ''text'': ''test_message'',
        ''username'': ''test_username'',
        ''icon_emoji'': '':smile:''
    }
    req = Request(SLACK_POST_URL, json.dumps(slack_message))
    response = urlopen(req)
</code></pre>

<p>これで、SLACK_POST_URL と slack_message だけいい感じに変えれば動く。</p>

<hr>

<p><a href="/">home</a></p>

</body>

</html>
